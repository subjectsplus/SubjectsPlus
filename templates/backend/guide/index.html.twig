{% extends 'backend/base.html.twig' %}

{% block browser_title %}{{ 'control.header.guides.index' | trans }}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-8">
            <h1 class="fw-light">{{ 'control.header.guides.index' | trans }}</h1>
            {# TODO: Working switch to show active guides (Public), change label with switch  #}
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="switchShowActiveGuides" checked>
                <label class="form-check-label fs-sm" for="switchShowActiveGuides">{{ 'control.guides.index.active_guides_label' | trans }}</label>
            </div>
        </div>
        <div class="col-4 col-xl-3 offset-xl-1 text-end text-xl-start">
            <a class="btn btn-gradient btn-pill-icon" type="button" href="{{ path('guide_new') }}"><i class="fas fa-plus-circle"></i> {{ 'control.guides.create_new_button' | trans }}</a>
        </div>
    </div>

    <div class="mt-3">
        {{ include('backend/guide/_search_with_filter.html.twig') }}
    </div>

    <div class="row mt-4">
        <div class="col-xl-8">
            {# TODO: REACT table with sorting for Guide Name, Type and Update Date  #}
            <table class="table table-striped table-responsive">
                <thead>
                <tr>
                    <th>{{ 'control.guides.table.heading.actions' | trans }}</th>
                    <th>
                        {{ 'control.guides.table.heading.guide_name' | trans }} <button class="btn btn-sm btn-icon-default rounded-0 px-1 py-0" title="Sort"><i class="fas fa-arrow-up"></i></button>
                    </th>
                    <th>{{ 'control.guides.table.heading.visibility' | trans }}</th>
                    <th>{{ 'control.guides.table.heading.type' | trans }}</th>
                    <th>{{ 'control.guides.table.heading.last_update' | trans }}</th>
                </tr>
                </thead>
                <tbody>
                {% for guide in guides %}
                    <tr>
                        <td>
                            <div class="btn-group btn-group-sm" role="group" aria-label="{{ 'control.faqs.table.action_buttons.aria' | trans }}">
                                <a href="{{ path('guide_edit', {'subjectId': guide.subjectId}) }}" class="btn btn-icon-default rounded-0" type="button" title="{{ 'control.guides.table.button.guide_details' | trans }}"><i class="fas fa-cog"></i></a>
                                <a href="{{ path('guide_build', {'subjectId': guide.subjectId}) }}" class="btn btn-icon-default rounded-0" type="button" title="{{ 'control.guide.table.button.guide_builder' | trans }}"><i class="fas fa-pen"></i></a>
                                <a href="{{ path('subject_show', {'shortform': guide.shortform}) }}" class="btn btn-icon-default rounded-0" type="button" title="{{ 'control.guides.table.button.preview' | trans }}" target="_blank"><i class="fas fa-eye fs-sm"></i></a>
                            </div>
                        </td>
                        <td><a href="{{ path('guide_build', {'subjectId': guide.subjectId}) }}" class="btn-link-default">{{ guide.subject | raw }}</a></td>
                        <td>
                            {% if guide.active == 1 %}
                                {{ 'control.guides.table.type.active' | trans }}
                            {% elseif guide.active == 0 %}
                                {{ 'control.guides.table.type.hidden' | trans }}
                            {% elseif guide.active == 2 %}
                                {{ 'control.guides.table.type.suppressed' | trans }}
                            {% else %}
                                {{ 'control.not_applicable_label' | trans }}
                            {% endif %}
                        </td>
                        <td>{{ guide.type }}</td>
                        <td style="min-width:130px;">{{ guide.lastModified|format_date() }}</td>
                    </tr>
                {% else %}
                    <tr>
                        <td>{{ 'control.faqs.table.no_records' | trans }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-xl-3 offset-xl-1">
            <h5>Key to Icons</h5>
            <ul class="list-unstyled list-space fs-sm">
                <li><i class="fas fa-cog"></i> Edit guide metadata</li>
                <li><i class="fas fa-pen"></i> Edit guide content</li>
                <li><i class="fas fa-eye fs-sm"></i> View guide on public website</li>
            </ul>
            {# TODO: Add link to help #}
            <p class="mt-4"><a href="#" class="btn-link">Help with Guides</a></p>
        </div>
    </div>
{% endblock %}